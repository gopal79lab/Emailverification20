<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Email Validation Tool</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f9f9f9;
        }

        h1 {
    text-align: center; /* Centers the title */
    color: #007bff;     /* Standard blue color */
    font-size: 2.5rem;
}




        h2 {
            color: #333;
        }

        form, .search-bar {
            margin-bottom: 20px;
            padding: 15px;
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        form label, .search-bar label {
            font-weight: bold;
        }

        form input[type="file"], .search-bar input[type="text"] {
            margin: 10px 0;
            padding: 5px;
            width: calc(100% - 20px);
            display: block;
            font-size: 1rem;
        }

        form button, .search-bar button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 3px;
        }

        form button:hover, .search-bar button:hover {
            background-color: #0056b3;
        }

        .message {
            margin-bottom: 20px;
            padding: 10px;
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            border-radius: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background-color: #fff;
            border: 1px solid #ccc;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        table th, table td {
            padding: 10px;
            text-align: left;
            border: 1px solid #ccc;
        }

        table th {
            background-color: #f2f2f2;
        }

        table td a {
            color: #007bff;
            text-decoration: none;
        }

        table td a:hover {
            text-decoration: underline;
        }

        table td button {
            padding: 5px 10px;
            cursor: pointer;
            font-size: 1rem;
            border-radius: 3px;
        }

        /* Blue button for Verify and Download Results */
        table td button.verify, table td button.download {
            background-color: #007bff;
            color: white;
            border: none;
        }

        table td button.verify:hover, table td button.download:hover {
            background-color: #0056b3;
        }

        table td button.delete {
            color: white;
            background-color: #dc3545;
            border: none;
        }

        table td button.delete:hover {
            background-color: #c82333;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .action-buttons button {
            margin: 0;
        }
        .email-container{
        display: flex;
    flex-direction: row;
    justify-content: space-between;
    gap: 20px;
        }
    </style>
    <script>
        function resetForm() {
            document.getElementById("file").value = ""; // Clear the file input
        }

        function deleteFile(fileId) {
            if (confirm("Are you sure you want to delete this file?")) {
                window.location.href = "/email-verification/delete/" + fileId;
            }
        }
    </script>
</head>
<body>
    <h1>Email Validation Tool</h1>

    <!-- Display Success Message -->
    <div th:if="${message}" class="message">
        <p th:text="${message}"></p>
    </div>

    <!-- File Upload Form -->
    <div class="email-container">
    <form method="post" style="width:100%" enctype="multipart/form-data" th:action="@{/email-verification/upload}">
        <label for="file">Upload Excel File:</label>
        <input type="file" id="file" name="file" required>
        <div>
            <button type="submit">Upload</button>
            <button type="button" onclick="resetForm()">Reset</button>
        </div>
    </form>
        <form action="/verifyemailaddress/verify-email" style="display: flex;width:100%;justify-content: center;align-items: center;" method="post" class="form-group">
            <div class="single-email" style="
    display: flex;
    justify-content: center;
    height: 40px;
    gap: 20px;

">
                <input type="email" name="email" placeholder="Enter email to verify" required="" style="
    width: 300px;
">
                <button type="submit">Verify</button>
            </div>
        </form>
    </div>
    <div class="search-bar">
    <form method="get" th:action="@{/email-verification/search}">
        <label for="search">Search by File Name:</label>
        <input type="text" id="search" name="query" placeholder="Enter file name..." required>
        <div style="display: flex; gap: 10px;">
            <button type="submit">Search</button>
            <!-- Refresh Button -->
            <button type="button" onclick="refreshSearch()">Refresh</button>
        </div>
    </form>


    </div>

<script>
    function refreshSearch() {
        document.getElementById("search").value = "";
        window.location.href = "/email-verification";
    }
</script>

    <h2>Uploaded Files</h2>
    <table>
        <thead>
            <tr>
                <th>File ID</th>
                <th>File Name</th>
                <th>Uploaded Time</th>
                <th>Verified</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="file : ${uploadedFiles}">
                <td th:text="${file.id}"></td>
                <td th:text="${file.fileName}"></td>
                <td th:text="${file.uploadTime}"></td>
                <td th:text="${file.verified ? 'Yes' : 'No'}"></td>
                <td>
                    <div class="action-buttons">
                        <!-- Verify Button -->
                        <button th:if="${!file.verified}" class="verify" th:onclick="'window.location.href=\'/email-verification/verify/' + ${file.id} + '\''">Verify</button>

                        <!-- Download Results Button -->
                        <button th:if="${file.verified}" class="download" th:onclick="'window.location.href=\'/email-verification/download/' + ${file.id} + '\''">Download Results</button>

                        <!-- Delete Button -->
                        <button class="delete" th:onclick="'deleteFile(' + ${file.id} + ')'">Delete</button>
                    </div>
                </td>
            </tr>
            <tr th:if="${uploadedFiles.empty}">
                <td colspan="5" style="text-align: center;">No files uploaded yet.</td>
            </tr>
        </tbody>
    </table>
</body>
</html>

//Second for singleEmailVerification


<!--<html xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <title>Email Verification</title>-->
<!--    <style>-->
<!--        /* Basic reset */-->
<!--        * {-->
<!--            margin: 0;-->
<!--            padding: 0;-->
<!--            box-sizing: border-box;-->
<!--        }-->

<!--        body, html {-->
<!--            height: 100%;-->
<!--            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;-->
<!--            display: flex;-->
<!--            justify-content: center;-->
<!--            align-items: center;-->
<!--            background-color: #f4f7fc;-->
<!--            color: #333;-->
<!--        }-->

<!--        .container {-->
<!--            text-align: center;-->
<!--            background-color: #ffffff;-->
<!--            padding: 40px;-->
<!--            border-radius: 8px;-->
<!--            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);-->
<!--            width: 100%;-->
<!--            max-width: 600px;-->
<!--        }-->

<!--        h1 {-->
<!--            font-size: 2rem;-->
<!--            margin-bottom: 20px;-->
<!--            color: #4CAF50;-->
<!--        }-->

<!--        table {-->
<!--            width: 100%;-->
<!--            border-collapse: collapse;-->
<!--            margin: 20px 0;-->
<!--        }-->

<!--        table th, table td {-->
<!--            text-align: left;-->
<!--            padding: 12px;-->
<!--            border: 1px solid #ddd;-->
<!--        }-->

<!--        table th {-->
<!--            background-color: #f4f7fc;-->
<!--            font-weight: bold;-->
<!--        }-->

<!--        .btn {-->
<!--            display: inline-block;-->
<!--            padding: 10px 20px;-->
<!--            background-color: #4CAF50;-->
<!--            color: #fff;-->
<!--            text-decoration: none;-->
<!--            border-radius: 5px;-->
<!--            transition: background-color 0.3s ease;-->
<!--        }-->

<!--        .btn:hover {-->
<!--            background-color: #45a049;-->
<!--        }-->

<!--        .form-group {-->
<!--            margin: 20px 0;-->
<!--        }-->

<!--        .form-group input[type="email"] {-->
<!--            width: 80%;-->
<!--            padding: 10px;-->
<!--            margin-right: 10px;-->
<!--            border: 1px solid #ddd;-->
<!--            border-radius: 5px;-->
<!--        }-->

<!--        .form-group button {-->
<!--            padding: 10px 20px;-->
<!--            background-color: #4CAF50;-->
<!--            color: #fff;-->
<!--            border: none;-->
<!--            border-radius: 5px;-->
<!--            cursor: pointer;-->
<!--            transition: background-color 0.3s ease;-->
<!--        }-->

<!--        .form-group button:hover {-->
<!--            background-color: #45a049;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--<div class="container">-->
<!--    <h1>Email Verification</h1>-->

<!--    &lt;!&ndash; Single email verification form &ndash;&gt;-->
<!--    <form th:action="@{/verifyemailaddress/verify-email}" method="post" class="form-group">-->
<!--        <input type="email" name="email" placeholder="Enter email to verify" required>-->
<!--        <button type="submit">Verify</button>-->
<!--    </form>-->

<!--    &lt;!&ndash; Display table for results &ndash;&gt;-->
<!--    <table>-->
<!--        <thead>-->
<!--        <tr>-->
<!--            <th>Email Address</th>-->
<!--            <th>Verification Status</th>-->
<!--        </tr>-->
<!--        </thead>-->
<!--        <tbody>-->
<!--        &lt;!&ndash; Iterate through responses and display them &ndash;&gt;-->
<!--        <tr th:each="response : ${responses}">-->
<!--            <td th:text="${response.email}"></td>-->
<!--            <td th:text="${response.message}"></td>-->
<!--        </tr>-->
<!--        </tbody>-->
<!--    </table>-->

<!--    &lt;!&ndash; Provide download button for updated Excel &ndash;&gt;-->
<!--    <a th:href="@{/verifyemailaddress/download}" class="btn">Download Updated File</a>-->
<!--</div>-->
<!--</body>-->
<!--</html>-->
